  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
AuthenticatableTest: test_generate_api_key_does_stuff
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreatePeople (20150604023700)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "people" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150604023700"]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------
AuthenticatableTest: test_generate_api_key_creates_api_key
----------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:15:46.543898"], ["updated_at", "2015-06-04 06:15:46.543898"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:16:31.723755"], ["updated_at", "2015-06-04 06:16:31.723755"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:16:46.351898"], ["updated_at", "2015-06-04 06:16:46.351898"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:17:07.097183"], ["updated_at", "2015-06-04 06:17:07.097183"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateApiKeys (20150604064006)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateApiKeys (20150604064006)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "api_keys" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "authenticatable_id" integer, "authenticatable_type" varchar, "token" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX "index_api_keys_on_authenticatable_id_and_authenticatable_type" ON "api_keys" ("authenticatable_id", "authenticatable_type")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_api_keys_on_token" ON "api_keys" ("token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150604064006"]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_api_keys_on_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_api_keys_on_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:41:25.568783"], ["updated_at", "2015-06-04 06:41:25.568783"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."person_id" = ? LIMIT 1  [[nil, 1]]
SQLite3::SQLException: no such column: api_keys.person_id: SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."person_id" = ? LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:42:06.759494"], ["updated_at", "2015-06-04 06:42:06.759494"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."authenticatable_id" = ? AND "api_keys"."authenticatable_type" = ? LIMIT 1  [["authenticatable_id", 1], ["authenticatable_type", "Person"]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:43:20.653711"], ["updated_at", "2015-06-04 06:43:20.653711"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "33a348a71438dff6e2df7009a9b4d27f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:43:20.666706"], ["updated_at", "2015-06-04 06:43:20.666706"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:43:39.865649"], ["updated_at", "2015-06-04 06:43:39.865649"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d662566f31747c642289bd792bf9121a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:43:39.876853"], ["updated_at", "2015-06-04 06:43:39.876853"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPerson Load (0.1ms)[0m  [1mSELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."authenticatable_id" = ? AND "api_keys"."authenticatable_type" = ? LIMIT 1  [["authenticatable_id", 1], ["authenticatable_type", "Person"]]
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatableTest: test_saves_api_key_before_create
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:44:24.332307"], ["updated_at", "2015-06-04 06:44:24.332307"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "777ea050f734cae3c06ea69676de95d9"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:44:24.342399"], ["updated_at", "2015-06-04 06:44:24.342399"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:48:03.346563"], ["updated_at", "2015-06-04 06:48:03.346563"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "e0c0d302cd7914a489b7db39d436d1b8"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:48:03.361463"], ["updated_at", "2015-06-04 06:48:03.361463"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:48:03.365765"], ["updated_at", "2015-06-04 06:48:03.365765"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "4742209611ed9d5dfdabbc22fb7cdb96"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:48:03.367322"], ["updated_at", "2015-06-04 06:48:03.367322"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateApiKeys (20150604064006)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.2ms)[0m  DROP TABLE "api_keys"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20150604064006"]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreatePeople (20150604023700)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  DROP TABLE "people"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20150604023700"]]
  [1m[35m (0.8ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreatePeople (20150604023700)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "people" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150604023700"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
Migrating to CreateApiKeys (20150604064006)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "api_keys" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "authenticatable_id" integer, "authenticatable_type" varchar, "token" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_api_keys_on_authenticatable_id_and_authenticatable_type" ON "api_keys" ("authenticatable_id", "authenticatable_type")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_api_keys_on_token" ON "api_keys" ("token")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150604064006"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_api_keys_on_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_api_keys_on_token' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_api_keys_on_authenticatable_id_and_authenticatable_type' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:48:47.265191"], ["updated_at", "2015-06-04 06:48:47.265191"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "61e964be2423e5abed20c0b6f30dd305"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:48:47.277924"], ["updated_at", "2015-06-04 06:48:47.277924"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:48:47.282605"], ["updated_at", "2015-06-04 06:48:47.282605"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "43fd93b278ec2420d94e02fa82a1a56e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:48:47.284007"], ["updated_at", "2015-06-04 06:48:47.284007"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:48:47.285292"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:49:05.900636"], ["updated_at", "2015-06-04 06:49:05.900636"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "6b4d82183b869ce326e6d57d83b491ad"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:49:05.913165"], ["updated_at", "2015-06-04 06:49:05.913165"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:49:05.916940"], ["updated_at", "2015-06-04 06:49:05.916940"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "6ca9a5baf83c31eac3bfc517da5b1148"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:49:05.918076"], ["updated_at", "2015-06-04 06:49:05.918076"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:49:05.919646"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:49:25.112782"], ["updated_at", "2015-06-04 06:49:25.112782"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "861fc8b73e67c0bc06777114a2ab058e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:49:25.122996"], ["updated_at", "2015-06-04 06:49:25.122996"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:49:25.127013"], ["updated_at", "2015-06-04 06:49:25.127013"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "a86746e389a6e10cc300d5dfb08b5b36"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:49:25.128396"], ["updated_at", "2015-06-04 06:49:25.128396"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:49:25.129723"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:49:43.062575"], ["updated_at", "2015-06-04 06:49:43.062575"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "6617fa14807ae5562dd67816a9935f57"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:49:43.072853"], ["updated_at", "2015-06-04 06:49:43.072853"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:49:43.076342"], ["updated_at", "2015-06-04 06:49:43.076342"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "bbef604d9a563dc5334627b85fe8ce6e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:49:43.077509"], ["updated_at", "2015-06-04 06:49:43.077509"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:49:43.078818"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:50:10.246478"], ["updated_at", "2015-06-04 06:50:10.246478"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "16ded7f55900fa03cd39dd4cc2d7cf82"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:50:10.257190"], ["updated_at", "2015-06-04 06:50:10.257190"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:50:10.258762"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:50:10.265772"], ["updated_at", "2015-06-04 06:50:10.265772"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "a581e4450227a798fae92330bdc30412"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:50:10.267145"], ["updated_at", "2015-06-04 06:50:10.267145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:50:31.494246"], ["updated_at", "2015-06-04 06:50:31.494246"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "5e74ab03f979651283e7be15850571fb"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:50:31.504762"], ["updated_at", "2015-06-04 06:50:31.504762"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:50:31.506246"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:50:31.512752"], ["updated_at", "2015-06-04 06:50:31.512752"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "98642546dcb971c02dde5d1d6484aa74"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:50:31.513914"], ["updated_at", "2015-06-04 06:50:31.513914"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:55:54.396120"], ["updated_at", "2015-06-04 06:55:54.396120"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "63be2235d5d14a33e75fe79d982b23f1"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:55:54.409714"], ["updated_at", "2015-06-04 06:55:54.409714"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:55:54.414181"], ["updated_at", "2015-06-04 06:55:54.414181"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "d0360c41903e1da97f1bfe3ce680335a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:55:54.416004"], ["updated_at", "2015-06-04 06:55:54.416004"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:56:17.868419"], ["updated_at", "2015-06-04 06:56:17.868419"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "478c4f05870fefdd6d21c181e5943246"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:56:17.879362"], ["updated_at", "2015-06-04 06:56:17.879362"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:56:17.884227"], ["updated_at", "2015-06-04 06:56:17.884227"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ee4acdb49c0dc57b2e055d30a69707e0"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:56:17.885460"], ["updated_at", "2015-06-04 06:56:17.885460"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:56:49.649235"], ["updated_at", "2015-06-04 06:56:49.649235"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "da322f9948dad1e1a4ff8907597f9832"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:56:49.659913"], ["updated_at", "2015-06-04 06:56:49.659913"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:56:49.663980"], ["updated_at", "2015-06-04 06:56:49.663980"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ea66c9dddd8b9865f6ed7ea074a7dd5a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:56:49.665179"], ["updated_at", "2015-06-04 06:56:49.665179"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:56:49.666428"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 06:57:05.130095"], ["updated_at", "2015-06-04 06:57:05.130095"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "10078da95c54e52397e1675cc507c4d1"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:57:05.140094"], ["updated_at", "2015-06-04 06:57:05.140094"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 06:57:05.141688"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 06:57:05.147797"], ["updated_at", "2015-06-04 06:57:05.147797"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "042f41a3d205ee68d6e42d60c850c051"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 06:57:05.149173"], ["updated_at", "2015-06-04 06:57:05.149173"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:11:15.267058"], ["updated_at", "2015-06-04 07:11:15.267058"]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "ec2f1ed8a1dafbb707ee995db8007f5c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:11:15.280982"], ["updated_at", "2015-06-04 07:11:15.280982"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:11:15.283918"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:11:15.293577"], ["updated_at", "2015-06-04 07:11:15.293577"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "fe31b2423c4f73e8344f20d308784012"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:11:15.295638"], ["updated_at", "2015-06-04 07:11:15.295638"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:12:37.133267"], ["updated_at", "2015-06-04 07:12:37.133267"]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "e8c3e4cafb7c029369e902adc9b37a05"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:12:37.147712"], ["updated_at", "2015-06-04 07:12:37.147712"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:12:37.150282"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:12:37.160715"], ["updated_at", "2015-06-04 07:12:37.160715"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "7a2e3c005e708cf3624fcbfeb02433f4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:12:37.162186"], ["updated_at", "2015-06-04 07:12:37.162186"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:17:34.425359"], ["updated_at", "2015-06-04 07:17:34.425359"]]
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "1c4bc76c9faf90e365feee8fc4d458ca"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:17:34.444626"], ["updated_at", "2015-06-04 07:17:34.444626"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:17:34.447474"], ["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:17:34.460138"], ["updated_at", "2015-06-04 07:17:34.460138"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "afedbf35a67bffcc8683baff1220f97f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:17:34.463715"], ["updated_at", "2015-06-04 07:17:34.463715"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Completed 200 OK in 7ms (Views: 7.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:18:18.830869"], ["updated_at", "2015-06-04 07:18:18.830869"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "29910f191448f4b2ed4397c20a90c567"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:18:18.842521"], ["updated_at", "2015-06-04 07:18:18.842521"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:18:18.846391"], ["updated_at", "2015-06-04 07:18:18.846391"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "74d4248e0d91abfc59a8c510efb85619"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:18:18.847669"], ["updated_at", "2015-06-04 07:18:18.847669"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:18:18.848956"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Completed 200 OK in 5ms (Views: 4.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:18:30.138005"], ["updated_at", "2015-06-04 07:18:30.138005"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "486e65992a4fa606451a799a8ca0eeab"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:18:30.154434"], ["updated_at", "2015-06-04 07:18:30.154434"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:18:30.156028"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:18:30.162767"], ["updated_at", "2015-06-04 07:18:30.162767"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "65562b3a8bba697241ced445c526aafe"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:18:30.164013"], ["updated_at", "2015-06-04 07:18:30.164013"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:18:44.995554"], ["updated_at", "2015-06-04 07:18:44.995554"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "a4bc8bbb57b0b437a72c5b1c1be03086"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:18:45.005324"], ["updated_at", "2015-06-04 07:18:45.005324"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:18:45.009658"], ["updated_at", "2015-06-04 07:18:45.009658"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "f72f5f840ae3d314fe086a18806ace79"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:18:45.010885"], ["updated_at", "2015-06-04 07:18:45.010885"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:18:45.012024"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:19:20.499249"], ["updated_at", "2015-06-04 07:19:20.499249"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "aa0e6ff130d52497ab15f48416e03cbc"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:19:20.516755"], ["updated_at", "2015-06-04 07:19:20.516755"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:19:20.521289"], ["updated_at", "2015-06-04 07:19:20.521289"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "79cffd0b6003007a638370e11f8f9277"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:19:20.522738"], ["updated_at", "2015-06-04 07:19:20.522738"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:19:20.526243"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:21:57.629380"], ["updated_at", "2015-06-04 07:21:57.629380"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "183952c5b8ad9275211086af88d42d16"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:21:57.647454"], ["updated_at", "2015-06-04 07:21:57.647454"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:21:57.649032"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:21:57.655656"], ["updated_at", "2015-06-04 07:21:57.655656"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ad56300c6e0f57a5062b7b2c42404e03"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:21:57.656923"], ["updated_at", "2015-06-04 07:21:57.656923"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:22:35.424508"], ["updated_at", "2015-06-04 07:22:35.424508"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "6279bd912819bdfce38a539d8de98757"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:22:35.434988"], ["updated_at", "2015-06-04 07:22:35.434988"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:22:35.436863"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:22:35.443871"], ["updated_at", "2015-06-04 07:22:35.443871"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "0641bd017d495ea65bb0536507bee709"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:22:35.445080"], ["updated_at", "2015-06-04 07:22:35.445080"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 3.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------
AuthenticatorTest: test_index
-----------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 4.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:23:39.579234"], ["updated_at", "2015-06-04 07:23:39.579234"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "b8153c00d7d7208979a64c98406ab4d4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:23:39.597391"], ["updated_at", "2015-06-04 07:23:39.597391"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:23:39.600231"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:23:39.606150"], ["updated_at", "2015-06-04 07:23:39.606150"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "e91dde8cc956a0c4a7b24fb051e3563c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:23:39.607421"], ["updated_at", "2015-06-04 07:23:39.607421"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:25:23.116973"], ["updated_at", "2015-06-04 07:25:23.116973"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "a09c257fb66971a5f93f740706c49d36"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:25:23.131843"], ["updated_at", "2015-06-04 07:25:23.131843"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"a09c257fb66971a5f93f740706c49d36"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 6.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:25:23.149705"], ["updated_at", "2015-06-04 07:25:23.149705"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "dfaf5124cccfc004f887147d737708f2"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:25:23.151022"], ["updated_at", "2015-06-04 07:25:23.151022"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:25:23.152187"], ["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:25:23.163915"], ["updated_at", "2015-06-04 07:25:23.163915"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "040beb390c5c7d2719f9f4e5922a9c8b"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:25:23.165502"], ["updated_at", "2015-06-04 07:25:23.165502"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:26:05.133897"], ["updated_at", "2015-06-04 07:26:05.133897"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "0059fb88d02b5e21da8692d913a5e131"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:26:05.143967"], ["updated_at", "2015-06-04 07:26:05.143967"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:26:05.145659"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:26:05.152615"], ["updated_at", "2015-06-04 07:26:05.152615"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "34bb6443d95b91b4fcadafe46ee7e874"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:26:05.154091"], ["updated_at", "2015-06-04 07:26:05.154091"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:26:05.203439"], ["updated_at", "2015-06-04 07:26:05.203439"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "9a0e13d18d6cfe4f8e7580e67306a97e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:26:05.204791"], ["updated_at", "2015-06-04 07:26:05.204791"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"9a0e13d18d6cfe4f8e7580e67306a97e"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:26:30.948556"], ["updated_at", "2015-06-04 07:26:30.948556"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "41d787ca112b77a34eba1b70cc45f725"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:26:30.958396"], ["updated_at", "2015-06-04 07:26:30.958396"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:26:30.959848"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:26:30.966331"], ["updated_at", "2015-06-04 07:26:30.966331"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "fecc5d5e04464ce47419c6d49d150996"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:26:30.967747"], ["updated_at", "2015-06-04 07:26:30.967747"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:26:31.015312"], ["updated_at", "2015-06-04 07:26:31.015312"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d4664f2db7e3e14a7265022d82ceebdc"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:26:31.017337"], ["updated_at", "2015-06-04 07:26:31.017337"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"d4664f2db7e3e14a7265022d82ceebdc"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 5.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:27:03.013772"], ["updated_at", "2015-06-04 07:27:03.013772"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "401e72b709d4ac21633138aebbf114b7"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:27:03.023477"], ["updated_at", "2015-06-04 07:27:03.023477"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"401e72b709d4ac21633138aebbf114b7"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:27:03.030716"], ["updated_at", "2015-06-04 07:27:03.030716"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "c2b0452e6109a19d23b686b2519306cf"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:27:03.031937"], ["updated_at", "2015-06-04 07:27:03.031937"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:27:03.033332"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:27:03.047438"], ["updated_at", "2015-06-04 07:27:03.047438"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "17f8a13935b540d8ede5b71a4a312123"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:27:03.050147"], ["updated_at", "2015-06-04 07:27:03.050147"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:29:35.074187"], ["updated_at", "2015-06-04 07:29:35.074187"]]
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "434f342b60ddece5793b80fb5301ece6"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:29:35.090577"], ["updated_at", "2015-06-04 07:29:35.090577"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"434f342b60ddece5793b80fb5301ece6"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:29:35.110500"], ["updated_at", "2015-06-04 07:29:35.110500"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "f67ff87abe8798af41263eacb48777d3"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:29:35.112059"], ["updated_at", "2015-06-04 07:29:35.112059"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:29:35.113296"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:29:35.120432"], ["updated_at", "2015-06-04 07:29:35.120432"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "e2f6a372df21bdf62798eeac844e4ca5"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:29:35.122879"], ["updated_at", "2015-06-04 07:29:35.122879"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:29:51.844157"], ["updated_at", "2015-06-04 07:29:51.844157"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "5b6b34330c6d114e9bd1b5472264d38e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:29:51.854745"], ["updated_at", "2015-06-04 07:29:51.854745"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"5b6b34330c6d114e9bd1b5472264d38e"}
  Rendered text template (0.1ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 10.7ms | ActiveRecord: 0.0ms)
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:29:51.883536"], ["updated_at", "2015-06-04 07:29:51.883536"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "8ee25e40c19f83bb804c18341f6bc824"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:29:51.885040"], ["updated_at", "2015-06-04 07:29:51.885040"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:29:51.888710"], ["updated_at", "2015-06-04 07:29:51.888710"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "e7b3ebc37f2e598814247741648c88fc"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:29:51.890989"], ["updated_at", "2015-06-04 07:29:51.890989"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:29:51.893391"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:30:31.946781"], ["updated_at", "2015-06-04 07:30:31.946781"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "db9d190e91621e28b43b33e56391f8ec"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:30:31.957315"], ["updated_at", "2015-06-04 07:30:31.957315"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:30:31.958951"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:30:31.965727"], ["updated_at", "2015-06-04 07:30:31.965727"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "5aac75fd98e656d918038ee7ecc6a973"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:30:31.966941"], ["updated_at", "2015-06-04 07:30:31.966941"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 3.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:30:32.021235"], ["updated_at", "2015-06-04 07:30:32.021235"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "4ac88094e53f27ce9a7e9f88ca25078e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:30:32.022805"], ["updated_at", "2015-06-04 07:30:32.022805"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"4ac88094e53f27ce9a7e9f88ca25078e"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:31:00.229959"], ["updated_at", "2015-06-04 07:31:00.229959"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "0a46ad692c43373cf6089373bd69d8df"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:31:00.246003"], ["updated_at", "2015-06-04 07:31:00.246003"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"0a46ad692c43373cf6089373bd69d8df"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:31:00.257258"], ["updated_at", "2015-06-04 07:31:00.257258"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "882ed82cd13694b446f8bf4372d6bf41"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:31:00.258515"], ["updated_at", "2015-06-04 07:31:00.258515"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:31:00.259618"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:31:00.265780"], ["updated_at", "2015-06-04 07:31:00.265780"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "017d8c8feb065732c142eca8919133ef"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:31:00.267082"], ["updated_at", "2015-06-04 07:31:00.267082"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:31:40.528261"], ["updated_at", "2015-06-04 07:31:40.528261"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d2d0f4969f000ee6fb8aca7b1a1a5b6e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:31:40.543298"], ["updated_at", "2015-06-04 07:31:40.543298"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:31:40.546293"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:31:40.556241"], ["updated_at", "2015-06-04 07:31:40.556241"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "d0343e5068770c43acf454d188d90c6c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:31:40.557799"], ["updated_at", "2015-06-04 07:31:40.557799"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 11968ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:31:52.586356"], ["updated_at", "2015-06-04 07:31:52.586356"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "56c463af1af5e007a0f1cd64b1cae577"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:31:52.590265"], ["updated_at", "2015-06-04 07:31:52.590265"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"56c463af1af5e007a0f1cd64b1cae577"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 12065ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 4.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:32:18.447757"], ["updated_at", "2015-06-04 07:32:18.447757"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "95b381b49fb00c93a89a01aae2912299"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:32:18.459101"], ["updated_at", "2015-06-04 07:32:18.459101"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"95b381b49fb00c93a89a01aae2912299"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:32:18.467609"], ["updated_at", "2015-06-04 07:32:18.467609"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "de47d0d8ddf1c5ef8bc679f9fb3efe19"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:32:18.471610"], ["updated_at", "2015-06-04 07:32:18.471610"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:32:18.477849"], ["updated_at", "2015-06-04 07:32:18.477849"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "cd0ecc921fb943cf4481426ee71dc53e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:32:18.479067"], ["updated_at", "2015-06-04 07:32:18.479067"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:32:18.480787"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:32:38.433748"], ["updated_at", "2015-06-04 07:32:38.433748"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "9ff8e15ea5eeb3843523a4a81afbf1a8"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:32:38.444867"], ["updated_at", "2015-06-04 07:32:38.444867"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:32:38.446796"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:32:38.453636"], ["updated_at", "2015-06-04 07:32:38.453636"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "1849190ca4b1de2aa81223ad824b42d1"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:32:38.454842"], ["updated_at", "2015-06-04 07:32:38.454842"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 5.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:32:38.523908"], ["updated_at", "2015-06-04 07:32:38.523908"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "9c9c9faac30c7c97ac608d96fed7185e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:32:38.525382"], ["updated_at", "2015-06-04 07:32:38.525382"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"9c9c9faac30c7c97ac608d96fed7185e"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 14ms (Views: 13.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:34:35.325641"], ["updated_at", "2015-06-04 07:34:35.325641"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "b3ced201c228e9aeb5da3ea3b764d912"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:34:35.339932"], ["updated_at", "2015-06-04 07:34:35.339932"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"b3ced201c228e9aeb5da3ea3b764d912"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:34:35.349284"], ["updated_at", "2015-06-04 07:34:35.349284"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "867b3bde94ca9a8f57e289dedc93c1db"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:34:35.352569"], ["updated_at", "2015-06-04 07:34:35.352569"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:34:35.354099"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:34:35.361502"], ["updated_at", "2015-06-04 07:34:35.361502"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "881d92db84e197fede59716511cb708b"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:34:35.362864"], ["updated_at", "2015-06-04 07:34:35.362864"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:35:27.181244"], ["updated_at", "2015-06-04 07:35:27.181244"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "999b4fbf732056b2ede3a446d7d511bc"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:35:27.195779"], ["updated_at", "2015-06-04 07:35:27.195779"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:35:27.200541"], ["updated_at", "2015-06-04 07:35:27.200541"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "e96349bf25644ac0306326ab14aa6653"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:35:27.201823"], ["updated_at", "2015-06-04 07:35:27.201823"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:35:27.203216"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:35:27.291338"], ["updated_at", "2015-06-04 07:35:27.291338"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d3065450729e58b35fcd3af702155d3c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:35:27.293109"], ["updated_at", "2015-06-04 07:35:27.293109"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"d3065450729e58b35fcd3af702155d3c"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
Completed 500 Internal Server Error in 9603ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:36:01.676219"], ["updated_at", "2015-06-04 07:36:01.676219"]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "eb226847248abca9aaad1220cc0290f4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:36:01.692572"], ["updated_at", "2015-06-04 07:36:01.692572"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"eb226847248abca9aaad1220cc0290f4"}
Completed 500 Internal Server Error in 1396ms (ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:36:03.099720"], ["updated_at", "2015-06-04 07:36:03.099720"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "3e9974c907fb338965dff99561573a0e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:36:03.101316"], ["updated_at", "2015-06-04 07:36:03.101316"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:36:03.104763"], ["updated_at", "2015-06-04 07:36:03.104763"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "49b706c924c8f2db73660dc02dea293c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:36:03.106405"], ["updated_at", "2015-06-04 07:36:03.106405"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:36:03.108010"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.3ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
Completed 500 Internal Server Error in 9353ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:37:11.529857"], ["updated_at", "2015-06-04 07:37:11.529857"]]
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "d96724d6dfed426d528f5b311612e1e5"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:37:11.545748"], ["updated_at", "2015-06-04 07:37:11.545748"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"d96724d6dfed426d528f5b311612e1e5"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = 'd96724d6dfed426d528f5b311612e1e5'
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = 'd96724d6dfed426d528f5b311612e1e5'
Completed 500 Internal Server Error in 3628ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:37:15.183225"], ["updated_at", "2015-06-04 07:37:15.183225"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "ae1b26b33d9510625b9aa547f6635f61"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:37:15.185527"], ["updated_at", "2015-06-04 07:37:15.185527"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:37:15.188068"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:37:15.192512"], ["updated_at", "2015-06-04 07:37:15.192512"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "5435a695abbccf8326c48f3b96cd30c1"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:37:15.193780"], ["updated_at", "2015-06-04 07:37:15.193780"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mApiKey Load (0.2ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = 'd96724d6dfed426d528f5b311612e1e5'[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = 'd96724d6dfed426d528f5b311612e1e5'
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
Completed 500 Internal Server Error in 1644ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:37:34.945484"], ["updated_at", "2015-06-04 07:37:34.945484"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "167bf921170b3da8d40d7e54ffd5bdda"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:37:34.957655"], ["updated_at", "2015-06-04 07:37:34.957655"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"167bf921170b3da8d40d7e54ffd5bdda"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '167bf921170b3da8d40d7e54ffd5bdda'
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '167bf921170b3da8d40d7e54ffd5bdda'
Completed 500 Internal Server Error in 1395ms (ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:37:36.358131"], ["updated_at", "2015-06-04 07:37:36.358131"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "8d08fa8a9aac0043aef3a56ce911e647"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:37:36.359284"], ["updated_at", "2015-06-04 07:37:36.359284"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:37:36.360696"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:37:36.364775"], ["updated_at", "2015-06-04 07:37:36.364775"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "e6e667d08b443554e131d5582425819a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:37:36.366449"], ["updated_at", "2015-06-04 07:37:36.366449"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35mApiKey Load (0.2ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '167bf921170b3da8d40d7e54ffd5bdda'[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '167bf921170b3da8d40d7e54ffd5bdda'
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.3ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
Completed 500 Internal Server Error in 727ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:38:59.056303"], ["updated_at", "2015-06-04 07:38:59.056303"]]
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "889da769557b0c81e84d7f98b4d4f030"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:38:59.071674"], ["updated_at", "2015-06-04 07:38:59.071674"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"889da769557b0c81e84d7f98b4d4f030"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '889da769557b0c81e84d7f98b4d4f030'
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '889da769557b0c81e84d7f98b4d4f030'
Completed 500 Internal Server Error in 585ms (ActiveRecord: 0.0ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:38:59.667138"], ["updated_at", "2015-06-04 07:38:59.667138"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "0983f331534e96e28f1d4bf6c31f2911"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:38:59.668578"], ["updated_at", "2015-06-04 07:38:59.668578"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:38:59.669973"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:38:59.674381"], ["updated_at", "2015-06-04 07:38:59.674381"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "2c893894b429892f60a5799de7ba424c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:38:59.675588"], ["updated_at", "2015-06-04 07:38:59.675588"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35mApiKey Load (0.2ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '889da769557b0c81e84d7f98b4d4f030'[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '889da769557b0c81e84d7f98b4d4f030'
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:39:10.411082"], ["updated_at", "2015-06-04 07:39:10.411082"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "9284a82a0ff8ff85bf0cd7344c27621a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:10.421056"], ["updated_at", "2015-06-04 07:39:10.421056"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:39:10.422674"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:39:10.429872"], ["updated_at", "2015-06-04 07:39:10.429872"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "72753bbb43df359f98f8bef088c33d7e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:10.433563"], ["updated_at", "2015-06-04 07:39:10.433563"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:39:10.475838"], ["updated_at", "2015-06-04 07:39:10.475838"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "8f4e3c236490a69b7a8060b17b0bfeba"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:10.477363"], ["updated_at", "2015-06-04 07:39:10.477363"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"8f4e3c236490a69b7a8060b17b0bfeba"}
  [1m[36mApiKey Load (0.3ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '8f4e3c236490a69b7a8060b17b0bfeba'[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '8f4e3c236490a69b7a8060b17b0bfeba'
Completed 500 Internal Server Error in 2359ms (ActiveRecord: 0.0ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.2ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
Completed 500 Internal Server Error in 1240ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mApiKey Load (0.2ms)[0m  SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '8f4e3c236490a69b7a8060b17b0bfeba'
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = '8f4e3c236490a69b7a8060b17b0bfeba'
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:39:27.125131"], ["updated_at", "2015-06-04 07:39:27.125131"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "e1ddb34b5cb5a5cb66eb50ea8030606b"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:27.152357"], ["updated_at", "2015-06-04 07:39:27.152357"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"e1ddb34b5cb5a5cb66eb50ea8030606b"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = 'e1ddb34b5cb5a5cb66eb50ea8030606b'  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
SQLite3::SQLException: no such column: api_keys.api_key: SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" = 'e1ddb34b5cb5a5cb66eb50ea8030606b'  ORDER BY "api_keys"."id" ASC LIMIT 1
Completed 500 Internal Server Error in 1280ms (ActiveRecord: 0.2ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.5ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1
SQLite3::SQLException: no such column: api_keys.api_key: SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."api_key" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1
Completed 500 Internal Server Error in 629ms (ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:39:29.076309"], ["updated_at", "2015-06-04 07:39:29.076309"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "1961e87aac6216a8c2177631d3820a22"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:29.078149"], ["updated_at", "2015-06-04 07:39:29.078149"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:39:29.083786"], ["updated_at", "2015-06-04 07:39:29.083786"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "cd3babf3ad13f6b2f93d6dd7c7fd23d2"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:29.087052"], ["updated_at", "2015-06-04 07:39:29.087052"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:39:29.088720"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:39:44.957526"], ["updated_at", "2015-06-04 07:39:44.957526"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "f2010fca46d6c3864de8591f42529b4f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:44.968873"], ["updated_at", "2015-06-04 07:39:44.968873"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:39:44.970869"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:39:44.978559"], ["updated_at", "2015-06-04 07:39:44.978559"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "fc337576798b6498d30ae6a85061542d"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:44.980093"], ["updated_at", "2015-06-04 07:39:44.980093"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 1585ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:39:46.613784"], ["updated_at", "2015-06-04 07:39:46.613784"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "1cf3b41998bf1c46dfea8bb11e4b7d22"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:39:46.615468"], ["updated_at", "2015-06-04 07:39:46.615468"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"1cf3b41998bf1c46dfea8bb11e4b7d22"}
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "1cf3b41998bf1c46dfea8bb11e4b7d22"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 614ms (Views: 7.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 1497ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:40:24.222783"], ["updated_at", "2015-06-04 07:40:24.222783"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "44a305abf07b5431155b8824367dbc16"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:40:24.231823"], ["updated_at", "2015-06-04 07:40:24.231823"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"44a305abf07b5431155b8824367dbc16"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "44a305abf07b5431155b8824367dbc16"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 637ms (Views: 6.2ms | ActiveRecord: 0.1ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:40:24.877793"], ["updated_at", "2015-06-04 07:40:24.877793"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "b29d5eac41e36ac0755f4e934acba9b5"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:40:24.879111"], ["updated_at", "2015-06-04 07:40:24.879111"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:40:24.880486"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:40:24.884532"], ["updated_at", "2015-06-04 07:40:24.884532"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "5bc452fd3e1c25b510020e4f97b97d42"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:40:24.886084"], ["updated_at", "2015-06-04 07:40:24.886084"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:40:52.729325"], ["updated_at", "2015-06-04 07:40:52.729325"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "bbf65487cd55097a924c0331762ef690"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:40:52.740591"], ["updated_at", "2015-06-04 07:40:52.740591"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:40:52.742047"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:40:52.749647"], ["updated_at", "2015-06-04 07:40:52.749647"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "777f54af689c5681c561f8cd1b6a7b77"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:40:52.751111"], ["updated_at", "2015-06-04 07:40:52.751111"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:40:52.796557"], ["updated_at", "2015-06-04 07:40:52.796557"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "dcb39182f021c3bdae730d50fa216252"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:40:52.799819"], ["updated_at", "2015-06-04 07:40:52.799819"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"dcb39182f021c3bdae730d50fa216252"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "dcb39182f021c3bdae730d50fa216252"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1614ms (Views: 6.5ms | ActiveRecord: 0.2ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1
Completed 500 Internal Server Error in 650ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 1986ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:41:20.781699"], ["updated_at", "2015-06-04 07:41:20.781699"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "3a335e40ded5f5d0f836c746d8ea300f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:41:20.790748"], ["updated_at", "2015-06-04 07:41:20.790748"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"3a335e40ded5f5d0f836c746d8ea300f"}
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "3a335e40ded5f5d0f836c746d8ea300f"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1260ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:41:22.057187"], ["updated_at", "2015-06-04 07:41:22.057187"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "4d13cf6d9396954b12ae33c7469a7c32"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:41:22.058501"], ["updated_at", "2015-06-04 07:41:22.058501"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:41:22.060584"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:41:22.066316"], ["updated_at", "2015-06-04 07:41:22.066316"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "c6dab5b0d0efee70afae9d1a0a691432"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:41:22.067514"], ["updated_at", "2015-06-04 07:41:22.067514"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.5ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
Completed 500 Internal Server Error in 10353ms (ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:42:04.796168"], ["updated_at", "2015-06-04 07:42:04.796168"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "f8de9a8f553037d8d9335bd4e77b75b9"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:42:04.805673"], ["updated_at", "2015-06-04 07:42:04.805673"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"f8de9a8f553037d8d9335bd4e77b75b9"}
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys"  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys"  ORDER BY "api_keys"."id" ASC LIMIT 1
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys"  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "f8de9a8f553037d8d9335bd4e77b75b9"]]
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "f8de9a8f553037d8d9335bd4e77b75b9"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 213585ms (Views: 8.9ms | ActiveRecord: 1.0ms)
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:45:38.400668"], ["updated_at", "2015-06-04 07:45:38.400668"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "9df6154d1da2a6dbb859b5150c56e235"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:45:38.402813"], ["updated_at", "2015-06-04 07:45:38.402813"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:45:38.405253"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:45:38.411385"], ["updated_at", "2015-06-04 07:45:38.411385"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "7d049eddd2d7e1d29cb6688f5d041b5c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:45:38.413020"], ["updated_at", "2015-06-04 07:45:38.413020"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:46:27.990685"], ["updated_at", "2015-06-04 07:46:27.990685"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "8403541c8ed86cfde8ce723120c47604"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:46:28.002075"], ["updated_at", "2015-06-04 07:46:28.002075"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"8403541c8ed86cfde8ce723120c47604"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "8403541c8ed86cfde8ce723120c47604"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 4.5ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:46:28.018150"], ["updated_at", "2015-06-04 07:46:28.018150"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d3ce3ab2d0905ec47e90e0266e1a4633"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:46:28.022335"], ["updated_at", "2015-06-04 07:46:28.022335"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:46:28.024559"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:46:28.056939"], ["updated_at", "2015-06-04 07:46:28.056939"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "99200367688ece069427778dd10c7038"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:46:28.058200"], ["updated_at", "2015-06-04 07:46:28.058200"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:47:07.302866"], ["updated_at", "2015-06-04 07:47:07.302866"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d41f910ceb537a56b3704f6ec02fe38e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:47:07.313231"], ["updated_at", "2015-06-04 07:47:07.313231"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:47:07.314863"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:47:07.321819"], ["updated_at", "2015-06-04 07:47:07.321819"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "e894b43ba1d70791fb34196ad60ca32b"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:47:07.323088"], ["updated_at", "2015-06-04 07:47:07.323088"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" IS NULL  ORDER BY "api_keys"."id" ASC LIMIT 1[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:47:07.376967"], ["updated_at", "2015-06-04 07:47:07.376967"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "b5f84b6484d694fd2104bc30f0ef7a4e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:47:07.378611"], ["updated_at", "2015-06-04 07:47:07.378611"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"b5f84b6484d694fd2104bc30f0ef7a4e"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "b5f84b6484d694fd2104bc30f0ef7a4e"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 43ms (Views: 41.4ms | ActiveRecord: 0.1ms)
  [1m[36m (1.3ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:47:51.834862"], ["updated_at", "2015-06-04 07:47:51.834862"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "a20b6be2ce87e647441405d55b80ef2e"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:47:51.846714"], ["updated_at", "2015-06-04 07:47:51.846714"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:47:51.848615"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:47:51.855454"], ["updated_at", "2015-06-04 07:47:51.855454"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ff77026697616cd08ebe0d77eed4b255"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:47:51.856837"], ["updated_at", "2015-06-04 07:47:51.856837"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:47:51.919051"], ["updated_at", "2015-06-04 07:47:51.919051"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "ca995ccf63e2a364f520ac2d25d8503d"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:47:51.920470"], ["updated_at", "2015-06-04 07:47:51.920470"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"ca995ccf63e2a364f520ac2d25d8503d"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "ca995ccf63e2a364f520ac2d25d8503d"]]
  Rendered text template (0.0ms)
Completed 200 OK in 34ms (Views: 0.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 5.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:48:03.751534"], ["updated_at", "2015-06-04 07:48:03.751534"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "dc20cdbb367704dffc447b96ffba6289"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:48:03.769673"], ["updated_at", "2015-06-04 07:48:03.769673"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"dc20cdbb367704dffc447b96ffba6289"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "dc20cdbb367704dffc447b96ffba6289"]]
  Rendered text template (0.0ms)
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:48:03.786947"], ["updated_at", "2015-06-04 07:48:03.786947"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "f8f1c3f2dc258c9c3a7beb9fc02f123f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:48:03.790319"], ["updated_at", "2015-06-04 07:48:03.790319"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:48:03.793550"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:48:03.798388"], ["updated_at", "2015-06-04 07:48:03.798388"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "8b093333c54c0df88af5c01d91a50022"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:48:03.800134"], ["updated_at", "2015-06-04 07:48:03.800134"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:51:08.083558"], ["updated_at", "2015-06-04 07:51:08.083558"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "7fcba6269a8b29bfe0e9fbc783dbc7f7"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:51:08.100881"], ["updated_at", "2015-06-04 07:51:08.100881"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
AuthenticatorTest: test_wrong_key_for_resource
----------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:51:08.117525"], ["updated_at", "2015-06-04 07:51:08.117525"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "e3a91ee00328057d42e17562401952c6"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:51:08.119127"], ["updated_at", "2015-06-04 07:51:08.119127"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"e3a91ee00328057d42e17562401952c6"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "e3a91ee00328057d42e17562401952c6"]]
  Rendered text template (0.0ms)
Completed 200 OK in 58ms (Views: 0.6ms | ActiveRecord: 0.2ms)
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
AuthenticatorTest: test_index_with_api_resource
-----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:51:08.186777"], ["updated_at", "2015-06-04 07:51:08.186777"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "bcd6ec326a48a520b2f1389ed2432a64"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:51:08.188318"], ["updated_at", "2015-06-04 07:51:08.188318"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:51:08.189634"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:51:08.194609"], ["updated_at", "2015-06-04 07:51:08.194609"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "def9ac72dcabbb97039d2f8cb535412a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:51:08.195849"], ["updated_at", "2015-06-04 07:51:08.195849"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:01.705003"], ["updated_at", "2015-06-04 07:53:01.705003"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "afe3772e2c3214f09b487a3a7485b369"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:01.715153"], ["updated_at", "2015-06-04 07:53:01.715153"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:53:01.716897"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:53:01.724441"], ["updated_at", "2015-06-04 07:53:01.724441"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ccff674a9d60bf85509b2c7206262fb0"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:01.725986"], ["updated_at", "2015-06-04 07:53:01.725986"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:01.770772"], ["updated_at", "2015-06-04 07:53:01.770772"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "6cc516d6358df68daf3e8544441221d0"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:01.772343"], ["updated_at", "2015-06-04 07:53:01.772343"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:53:01.779622"], ["updated_at", "2015-06-04 07:53:01.779622"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "49f22aa224bcb8ae5f40acf76bcad8f3"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:01.780870"], ["updated_at", "2015-06-04 07:53:01.780870"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
AuthenticatorTest: test_index_with_api_resource
-----------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 35ms (Views: 34.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
AuthenticatorTest: test_wrong_key_for_resource
----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:53:01.824100"], ["updated_at", "2015-06-04 07:53:01.824100"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "096b89df2c0ee85eec334931de2d0d10"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:01.825646"], ["updated_at", "2015-06-04 07:53:01.825646"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"096b89df2c0ee85eec334931de2d0d10"}
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "096b89df2c0ee85eec334931de2d0d10"]]
  Rendered text template (0.0ms)
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:01.830993"], ["updated_at", "2015-06-04 07:53:01.830993"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "57a471cf52eaf8bb8cc550296080f493"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:01.832313"], ["updated_at", "2015-06-04 07:53:01.832313"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:29.604855"], ["updated_at", "2015-06-04 07:53:29.604855"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "218f1d5ff2204fd47c960354bf853713"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:29.615212"], ["updated_at", "2015-06-04 07:53:29.615212"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:53:29.616899"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:53:29.624848"], ["updated_at", "2015-06-04 07:53:29.624848"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "b273fa0f068a2a62beae43e570fd859a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:29.627238"], ["updated_at", "2015-06-04 07:53:29.627238"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:29.684668"], ["updated_at", "2015-06-04 07:53:29.684668"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "971c7374638fddd5cfe59f2a0dd545be"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:29.686297"], ["updated_at", "2015-06-04 07:53:29.686297"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
AuthenticatorTest: test_wrong_key_for_resource
----------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:29.690445"], ["updated_at", "2015-06-04 07:53:29.690445"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "2fdea987fc77e04a011795777c2842fb"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:29.691728"], ["updated_at", "2015-06-04 07:53:29.691728"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:29.694622"], ["updated_at", "2015-06-04 07:53:29.694622"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "55c3503a44704d8aa0c81cab3cccb333"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:29.696479"], ["updated_at", "2015-06-04 07:53:29.696479"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"55c3503a44704d8aa0c81cab3cccb333"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "55c3503a44704d8aa0c81cab3cccb333"]]
  Rendered text template (0.0ms)
Completed 200 OK in 7ms (Views: 4.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
AuthenticatorTest: test_index_with_api_resource
-----------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:53:29.744621"], ["updated_at", "2015-06-04 07:53:29.744621"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "11661f904938d2a48820f83d9f6ef9c4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:29.746102"], ["updated_at", "2015-06-04 07:53:29.746102"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
AuthenticatorTest: test_index_with_api_resource
-----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:43.631118"], ["updated_at", "2015-06-04 07:53:43.631118"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "206425d890b3d16a3b66df043245d07f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:43.642934"], ["updated_at", "2015-06-04 07:53:43.642934"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"206425d890b3d16a3b66df043245d07f"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "206425d890b3d16a3b66df043245d07f"]]
  Rendered text template (0.0ms)
Completed 200 OK in 3304ms (Views: 5.3ms | ActiveRecord: 0.2ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:53:46.963009"], ["updated_at", "2015-06-04 07:53:46.963009"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "facc7828277909c3df282aa90e9e2de6"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:46.965147"], ["updated_at", "2015-06-04 07:53:46.965147"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 900ms (ActiveRecord: 0.1ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 805ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
AuthenticatorTest: test_wrong_key_for_resource
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:48.680209"], ["updated_at", "2015-06-04 07:53:48.680209"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "70cf0671a9370b67d67467483ccde53a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:48.682432"], ["updated_at", "2015-06-04 07:53:48.682432"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:48.687955"], ["updated_at", "2015-06-04 07:53:48.687955"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "294c0d605a3caa252567bad0514dda95"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:48.690049"], ["updated_at", "2015-06-04 07:53:48.690049"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:53:48.695769"], ["updated_at", "2015-06-04 07:53:48.695769"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "0aeb7d43edaea26e86f2ef128aede9ab"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:48.697545"], ["updated_at", "2015-06-04 07:53:48.697545"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:53:48.702280"], ["updated_at", "2015-06-04 07:53:48.702280"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ba8873c04b67ee18a48944270c5cca95"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:53:48.704577"], ["updated_at", "2015-06-04 07:53:48.704577"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:53:48.707275"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.1ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:54:26.363386"], ["updated_at", "2015-06-04 07:54:26.363386"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "5ef2a1ce2814db8e96593dd777d2112f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:54:26.374945"], ["updated_at", "2015-06-04 07:54:26.374945"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"5ef2a1ce2814db8e96593dd777d2112f"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "5ef2a1ce2814db8e96593dd777d2112f"]]
  Rendered text template (0.0ms)
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:54:26.386503"], ["updated_at", "2015-06-04 07:54:26.386503"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "8dea57a18a45649790e77e3186156fd3"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:54:26.388014"], ["updated_at", "2015-06-04 07:54:26.388014"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
AuthenticatorTest: test_index_with_api_resource
-----------------------------------------------
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:54:26.398211"], ["updated_at", "2015-06-04 07:54:26.398211"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "0e2fabdd51393269d8338023c99e40ed"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:54:26.399840"], ["updated_at", "2015-06-04 07:54:26.399840"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
AuthenticatorTest: test_wrong_key_for_resource
----------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:54:26.405837"], ["updated_at", "2015-06-04 07:54:26.405837"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "38a7151c0964def840c63a6e53ddf926"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:54:26.407026"], ["updated_at", "2015-06-04 07:54:26.407026"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "38a7151c0964def840c63a6e53ddf926"]]
  Rendered text template (0.0ms)
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:54:26.412980"], ["updated_at", "2015-06-04 07:54:26.412980"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "ab321aa067681eaa43daeecaa0547310"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:54:26.414365"], ["updated_at", "2015-06-04 07:54:26.414365"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:54:26.442731"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:54:26.448569"], ["updated_at", "2015-06-04 07:54:26.448569"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "33dd8dd8c7f52df0b92ab602c1736ee4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:54:26.449820"], ["updated_at", "2015-06-04 07:54:26.449820"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:24.424420"], ["updated_at", "2015-06-04 07:59:24.424420"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "4f906cae2976308bf8cb22e261ec13a3"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:24.435911"], ["updated_at", "2015-06-04 07:59:24.435911"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (5.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:59:24.445507"], ["updated_at", "2015-06-04 07:59:24.445507"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ca17bc98a8adb82a3d1ba497c5a34223"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:24.447426"], ["updated_at", "2015-06-04 07:59:24.447426"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:59:24.450789"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:24.503543"], ["updated_at", "2015-06-04 07:59:24.503543"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "0a2f2cb65300f64970145e9361cc59b9"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:24.505197"], ["updated_at", "2015-06-04 07:59:24.505197"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"0a2f2cb65300f64970145e9361cc59b9"}
  [1m[36mApiKey Load (0.4ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "0a2f2cb65300f64970145e9361cc59b9"]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
AuthenticatorTest: test_wrong_key_for_resource
----------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:59:24.517797"], ["updated_at", "2015-06-04 07:59:24.517797"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "a681792d21e7d424cb0b9a1f8127c0e9"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:24.519307"], ["updated_at", "2015-06-04 07:59:24.519307"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:59:24.520676"], ["updated_at", "2015-06-04 07:59:24.520676"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "9bdbd1a8f89a2ed6bdd171e77625d98f"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 07:59:24.521773"], ["updated_at", "2015-06-04 07:59:24.521773"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:59:24.524903"], ["updated_at", "2015-06-04 07:59:24.524903"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "1c8cf4650e3a9f2713e886dc9ca25db7"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:24.526418"], ["updated_at", "2015-06-04 07:59:24.526418"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 5.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:24.566786"], ["updated_at", "2015-06-04 07:59:24.566786"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "bf14dd99c83085db4fbdaef043d15604"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:24.568588"], ["updated_at", "2015-06-04 07:59:24.568588"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "bf14dd99c83085db4fbdaef043d15604"]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:59:24.573789"], ["updated_at", "2015-06-04 07:59:24.573789"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "a58fd62788d6d4064019ca893a815500"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:24.575181"], ["updated_at", "2015-06-04 07:59:24.575181"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
AuthenticatorTest: test_index_with_api_resource
-----------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:56.723091"], ["updated_at", "2015-06-04 07:59:56.723091"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "348aefa016abfb81afa8b8b79cea7a7d"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:56.733672"], ["updated_at", "2015-06-04 07:59:56.733672"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:59:56.737872"], ["updated_at", "2015-06-04 07:59:56.737872"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "eb6ee928ea43aa872f5885a2f08ead6f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:56.739238"], ["updated_at", "2015-06-04 07:59:56.739238"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 07:59:56.740570"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:56.794512"], ["updated_at", "2015-06-04 07:59:56.794512"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "5a127266be0accb3868238cbc58f995a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:56.795956"], ["updated_at", "2015-06-04 07:59:56.795956"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "5a127266be0accb3868238cbc58f995a"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 53ms (Views: 36.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
AuthenticatorTest: test_wrong_key_for_resource
----------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:56.854959"], ["updated_at", "2015-06-04 07:59:56.854959"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "c869c0570c0ef6998920734c3369d7da"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:56.856427"], ["updated_at", "2015-06-04 07:59:56.856427"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:56.857632"], ["updated_at", "2015-06-04 07:59:56.857632"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "52c2fcadff6999bfd5a1506795d454d6"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 07:59:56.858665"], ["updated_at", "2015-06-04 07:59:56.858665"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:56.861630"], ["updated_at", "2015-06-04 07:59:56.861630"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "8fe226ecf857dff705473539b132d04d"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:56.862914"], ["updated_at", "2015-06-04 07:59:56.862914"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"8fe226ecf857dff705473539b132d04d"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "8fe226ecf857dff705473539b132d04d"]]
  [1m[35mPerson Load (0.0ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 07:59:56.869231"], ["updated_at", "2015-06-04 07:59:56.869231"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "a170662a9c7c89771c2734058b8e1979"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:56.870835"], ["updated_at", "2015-06-04 07:59:56.870835"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 07:59:56.878374"], ["updated_at", "2015-06-04 07:59:56.878374"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "c4be5cfeecb59a9af9b2d7969a87eafa"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 07:59:56.879759"], ["updated_at", "2015-06-04 07:59:56.879759"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
AuthenticatorTest: test_index_with_api_resource
-----------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatorTest: test_resource_assigns_from_api_key
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:01:46.034059"], ["updated_at", "2015-06-04 08:01:46.034059"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "684737d2445a7676bfa34624e6be858b"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:01:46.050752"], ["updated_at", "2015-06-04 08:01:46.050752"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"684737d2445a7676bfa34624e6be858b"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "684737d2445a7676bfa34624e6be858b"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 5.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:01:46.077565"], ["updated_at", "2015-06-04 08:01:46.077565"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "9a5358c243c8599f40310e0a24c07f17"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:01:46.079089"], ["updated_at", "2015-06-04 08:01:46.079089"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:01:46.112667"], ["updated_at", "2015-06-04 08:01:46.112667"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "1885409afdc3e8c9ee30e6c524f6f719"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:01:46.114106"], ["updated_at", "2015-06-04 08:01:46.114106"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.2ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "1885409afdc3e8c9ee30e6c524f6f719"]]
  [1m[36mPerson Load (0.0ms)[0m  [1mSELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:01:46.121767"], ["updated_at", "2015-06-04 08:01:46.121767"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "fe9b986dfaa7ed88effc934658710893"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:01:46.123074"], ["updated_at", "2015-06-04 08:01:46.123074"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:01:46.130806"], ["updated_at", "2015-06-04 08:01:46.130806"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "3da29884654c633094ef905de91b0535"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:01:46.132187"], ["updated_at", "2015-06-04 08:01:46.132187"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"3da29884654c633094ef905de91b0535"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "3da29884654c633094ef905de91b0535"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:01:46.140855"], ["updated_at", "2015-06-04 08:01:46.140855"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "b9fe8867e8477a8e73d2d598162ca97c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:01:46.142196"], ["updated_at", "2015-06-04 08:01:46.142196"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 08:01:46.143433"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:01:46.147820"], ["updated_at", "2015-06-04 08:01:46.147820"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "25d5b71d81cae73645e13a546b5d63ec"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:01:46.149902"], ["updated_at", "2015-06-04 08:01:46.149902"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:00.967013"], ["updated_at", "2015-06-04 08:02:00.967013"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "284ce960fc8f3b1bc40be8df79243f9f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:00.978701"], ["updated_at", "2015-06-04 08:02:00.978701"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:02:00.983043"], ["updated_at", "2015-06-04 08:02:00.983043"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "ba44f638947b9c5f50555d5f94aa6a55"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:00.984346"], ["updated_at", "2015-06-04 08:02:00.984346"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 08:02:00.986026"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:01.033502"], ["updated_at", "2015-06-04 08:02:01.033502"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "0a985688e88c77766d53d553676f096d"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:01.035234"], ["updated_at", "2015-06-04 08:02:01.035234"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"0a985688e88c77766d53d553676f096d"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "0a985688e88c77766d53d553676f096d"]]
  [1m[35mPerson Load (0.2ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 47ms (Views: 3.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:01.088733"], ["updated_at", "2015-06-04 08:02:01.088733"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "525740b0b060d65784a390031e7ace8a"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:01.090238"], ["updated_at", "2015-06-04 08:02:01.090238"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:02:01.095352"], ["updated_at", "2015-06-04 08:02:01.095352"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "83762ace63dc652ca6443fb8b88ee95b"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:01.096811"], ["updated_at", "2015-06-04 08:02:01.096811"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatorTest: test_resource_assigns_from_api_key
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:01.102205"], ["updated_at", "2015-06-04 08:02:01.102205"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "01317a7b1d043191dd55ed58714a1759"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:01.103609"], ["updated_at", "2015-06-04 08:02:01.103609"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:01.104908"], ["updated_at", "2015-06-04 08:02:01.104908"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "3fe5893a20c0c728fc95be1eb533b5d0"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 08:02:01.106066"], ["updated_at", "2015-06-04 08:02:01.106066"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"01317a7b1d043191dd55ed58714a1759"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "01317a7b1d043191dd55ed58714a1759"]]
  [1m[35mPerson Load (0.0ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:01.115225"], ["updated_at", "2015-06-04 08:02:01.115225"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "351be8bd97db06cee840573c4c6fee4c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:01.116476"], ["updated_at", "2015-06-04 08:02:01.116476"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "351be8bd97db06cee840573c4c6fee4c"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:47.641952"], ["updated_at", "2015-06-04 08:02:47.641952"]]
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "94602694a9692cf6efba8088b9c8ea80"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:47.656238"], ["updated_at", "2015-06-04 08:02:47.656238"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 08:02:47.659182"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:02:47.668659"], ["updated_at", "2015-06-04 08:02:47.668659"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "26d6b7b38e6e1dc514f993c08fc03e2d"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:47.670385"], ["updated_at", "2015-06-04 08:02:47.670385"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:47.729335"], ["updated_at", "2015-06-04 08:02:47.729335"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d851201a0768d7daa9252000c38eccf3"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:47.730954"], ["updated_at", "2015-06-04 08:02:47.730954"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "d851201a0768d7daa9252000c38eccf3"]]
  [1m[35mPerson Load (0.2ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 44ms (Views: 6.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:47.785474"], ["updated_at", "2015-06-04 08:02:47.785474"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "62d14482a6bd31667ee7708c8314e8f2"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:47.787039"], ["updated_at", "2015-06-04 08:02:47.787039"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"62d14482a6bd31667ee7708c8314e8f2"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "62d14482a6bd31667ee7708c8314e8f2"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:47.793376"], ["updated_at", "2015-06-04 08:02:47.793376"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "d94b56ee56fb5f2b3ad4d25381251f37"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:47.794857"], ["updated_at", "2015-06-04 08:02:47.794857"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:02:47.802831"], ["updated_at", "2015-06-04 08:02:47.802831"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "93030f59f523c70bab6479718a3fef41"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:47.804362"], ["updated_at", "2015-06-04 08:02:47.804362"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatorTest: test_resource_assigns_from_api_key
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:47.809080"], ["updated_at", "2015-06-04 08:02:47.809080"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "728344044ff3c9c9bad6873986b3be09"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:02:47.810771"], ["updated_at", "2015-06-04 08:02:47.810771"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:02:47.812124"], ["updated_at", "2015-06-04 08:02:47.812124"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "22af223ed6ff66c2d74e9b08335ae754"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 08:02:47.813104"], ["updated_at", "2015-06-04 08:02:47.813104"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"728344044ff3c9c9bad6873986b3be09"}
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "728344044ff3c9c9bad6873986b3be09"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:03:00.858362"], ["updated_at", "2015-06-04 08:03:00.858362"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "3b1a0b40399a7f773ed4cd25b48bd5c1"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:03:00.869228"], ["updated_at", "2015-06-04 08:03:00.869228"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 08:03:00.871071"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:03:00.878471"], ["updated_at", "2015-06-04 08:03:00.878471"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "91782b0855f7167225ad3d6d7144268d"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:03:00.880029"], ["updated_at", "2015-06-04 08:03:00.880029"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:03:00.927581"], ["updated_at", "2015-06-04 08:03:00.927581"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "3b34e4425bf7f16b9c5389b07112de16"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:03:00.929159"], ["updated_at", "2015-06-04 08:03:00.929159"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 38ms (Views: 35.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:03:00.973238"], ["updated_at", "2015-06-04 08:03:00.973238"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "4801cff55169f7c1791b90fe6f3d6346"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:03:00.974715"], ["updated_at", "2015-06-04 08:03:00.974715"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatorTest: test_resource_assigns_from_api_key
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:03:00.982107"], ["updated_at", "2015-06-04 08:03:00.982107"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "9be11d67844d0c1ed62d161d031af3ea"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:03:00.983804"], ["updated_at", "2015-06-04 08:03:00.983804"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:03:00.985004"], ["updated_at", "2015-06-04 08:03:00.985004"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "fd533ffcc6abe6b48528304c7221e302"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 08:03:00.985987"], ["updated_at", "2015-06-04 08:03:00.985987"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"9be11d67844d0c1ed62d161d031af3ea"}
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "9be11d67844d0c1ed62d161d031af3ea"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:03:00.996128"], ["updated_at", "2015-06-04 08:03:00.996128"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "015dde48c25b5381d8de221778faaf81"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:03:00.997633"], ["updated_at", "2015-06-04 08:03:00.997633"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"015dde48c25b5381d8de221778faaf81"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "015dde48c25b5381d8de221778faaf81"]]
  [1m[35mPerson Load (0.0ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:03:01.003289"], ["updated_at", "2015-06-04 08:03:01.003289"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "b52224748c3c426522c7d09cdd349677"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:03:01.004528"], ["updated_at", "2015-06-04 08:03:01.004528"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "b52224748c3c426522c7d09cdd349677"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.8ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:04:58.943652"], ["updated_at", "2015-06-04 08:04:58.943652"]]
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "f19d76216f537851adee29a1d73c0f68"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:04:58.976421"], ["updated_at", "2015-06-04 08:04:58.976421"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 08:04:58.983740"], ["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:04:58.995683"], ["updated_at", "2015-06-04 08:04:58.995683"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "f4e227f726db9e479d664a9ba2659d15"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:04:58.998379"], ["updated_at", "2015-06-04 08:04:58.998379"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatorTest: test_resource_assigns_from_api_key
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:04:59.094030"], ["updated_at", "2015-06-04 08:04:59.094030"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "2066775e6cfe999a253c96f3e5bf2cb4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:04:59.096556"], ["updated_at", "2015-06-04 08:04:59.096556"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:04:59.099036"], ["updated_at", "2015-06-04 08:04:59.099036"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "26e79c980f5d6bbc6039af938082c8cd"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 08:04:59.102976"], ["updated_at", "2015-06-04 08:04:59.102976"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"2066775e6cfe999a253c96f3e5bf2cb4"}
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "2066775e6cfe999a253c96f3e5bf2cb4"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 45ms (Views: 5.8ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------
AuthenticatorTest: test_invalid_request_should_not_assign_resource
------------------------------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:05:29.500407"], ["updated_at", "2015-06-04 08:05:29.500407"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "5681367c6dc69cb719456fe645bb1d91"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:29.503304"], ["updated_at", "2015-06-04 08:05:29.503304"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"5681367c6dc69cb719456fe645bb1d91"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "5681367c6dc69cb719456fe645bb1d91"]]
  [1m[35mPerson Load (0.0ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:05:29.510068"], ["updated_at", "2015-06-04 08:05:29.510068"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "03f560963bd37f400167a5feb4ebbe03"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:29.511426"], ["updated_at", "2015-06-04 08:05:29.511426"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:05:29.520079"], ["updated_at", "2015-06-04 08:05:29.520079"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "7722b75c30cde8987d138c580f7e31bc"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:29.521728"], ["updated_at", "2015-06-04 08:05:29.521728"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:05:29.532332"], ["updated_at", "2015-06-04 08:05:29.532332"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "99c2b994ceb81cefc88cc570380470e0"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:29.533843"], ["updated_at", "2015-06-04 08:05:29.533843"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "99c2b994ceb81cefc88cc570380470e0"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:05:46.769076"], ["updated_at", "2015-06-04 08:05:46.769076"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "a9448340714203a25897f713fe2b8503"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:46.781544"], ["updated_at", "2015-06-04 08:05:46.781544"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 6.4ms | ActiveRecord: 0.1ms)
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------
AuthenticatorTest: test_invalid_request_should_not_assign_resource
------------------------------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:05:46.810150"], ["updated_at", "2015-06-04 08:05:46.810150"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "f830d2eb75839e45875dbdd3a67b64b4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:46.811462"], ["updated_at", "2015-06-04 08:05:46.811462"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"f830d2eb75839e45875dbdd3a67b64b4"}
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "f830d2eb75839e45875dbdd3a67b64b4"]]
  [1m[36mPerson Load (0.1ms)[0m  [1mSELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 40ms (Views: 0.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:05:46.855395"], ["updated_at", "2015-06-04 08:05:46.855395"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "f88e50848afd7f1318ff7c949e6f8f1f"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:46.856668"], ["updated_at", "2015-06-04 08:05:46.856668"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.1ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "f88e50848afd7f1318ff7c949e6f8f1f"]]
  [1m[36mPerson Load (0.0ms)[0m  [1mSELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:05:46.861978"], ["updated_at", "2015-06-04 08:05:46.861978"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "a3b15b519d6b43762e0083096fa41fd4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:46.863225"], ["updated_at", "2015-06-04 08:05:46.863225"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatorTest: test_resource_assigns_from_api_key
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:05:46.868432"], ["updated_at", "2015-06-04 08:05:46.868432"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "71d54b4492420096d0c64df6683159b6"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:46.869605"], ["updated_at", "2015-06-04 08:05:46.869605"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:05:46.871063"], ["updated_at", "2015-06-04 08:05:46.871063"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "2c7a97fadc140787af4ec243d33b1730"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 08:05:46.872763"], ["updated_at", "2015-06-04 08:05:46.872763"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"71d54b4492420096d0c64df6683159b6"}
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "71d54b4492420096d0c64df6683159b6"]]
  [1m[35mPerson Load (0.0ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:05:46.893767"], ["updated_at", "2015-06-04 08:05:46.893767"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "5eaabb6611b67d97718e64e50c15e31c"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:46.895540"], ["updated_at", "2015-06-04 08:05:46.895540"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 08:05:46.898889"], ["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:05:46.902784"], ["updated_at", "2015-06-04 08:05:46.902784"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "8f0941ff341dee6ce66055a6bda28d64"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:05:46.903992"], ["updated_at", "2015-06-04 08:05:46.903992"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "api_keys"
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_header
-------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:06:00.841592"], ["updated_at", "2015-06-04 08:06:00.841592"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "f059b661bff37b05759829c5c9bb07b3"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:06:00.860254"], ["updated_at", "2015-06-04 08:06:00.860254"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  [1m[36mApiKey Load (0.2ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "f059b661bff37b05759829c5c9bb07b3"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.1ms)
Completed 200 OK in 15ms (Views: 5.1ms | ActiveRecord: 0.3ms)
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------
AuthenticatorTest: test_index_with_valid_api_key_param
------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:06:00.912393"], ["updated_at", "2015-06-04 08:06:00.912393"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "65d6921503a6fdaf80e82c9d14b692a4"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:06:00.913797"], ["updated_at", "2015-06-04 08:06:00.913797"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"65d6921503a6fdaf80e82c9d14b692a4"}
  [1m[36mApiKey Load (0.1ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "65d6921503a6fdaf80e82c9d14b692a4"]]
  [1m[35mPerson Load (0.0ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
AuthenticatorTest: test_resource_assigns_from_api_key
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:06:00.919898"], ["updated_at", "2015-06-04 08:06:00.919898"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "8eff8eca88d07dbb21740b1ff9b244d2"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:06:00.921118"], ["updated_at", "2015-06-04 08:06:00.921118"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:06:00.922392"], ["updated_at", "2015-06-04 08:06:00.922392"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "93b5c873a071d186b4422abd02521521"], ["authenticatable_type", "Person"], ["authenticatable_id", 2], ["created_at", "2015-06-04 08:06:00.924455"], ["updated_at", "2015-06-04 08:06:00.924455"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"8eff8eca88d07dbb21740b1ff9b244d2"}
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "8eff8eca88d07dbb21740b1ff9b244d2"]]
  [1m[35mPerson Load (0.0ms)[0m  SELECT  "people".* FROM "people" WHERE "people"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
---------------------------------------------
AuthenticatorTest: test_index_with_no_api_key
---------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------
AuthenticatorTest: test_invalid_request_should_not_assign_resource
------------------------------------------------------------------
Processing by PeopleController#index as HTML
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_param
--------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:06:00.937536"], ["updated_at", "2015-06-04 08:06:00.937536"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "b8162956617d13d92955e1e5e4035935"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:06:00.938712"], ["updated_at", "2015-06-04 08:06:00.938712"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PeopleController#index as HTML
  Parameters: {"token"=>"123123123"}
  [1m[36mApiKey Load (0.0ms)[0m  [1mSELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1[0m  [["token", "123123123"]]
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------
AuthenticatorTest: test_index_with_invalid_api_key_header
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:06:00.943585"], ["updated_at", "2015-06-04 08:06:00.943585"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "a8ac623b383e1c15ebd0aec64fdcac65"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:06:00.944894"], ["updated_at", "2015-06-04 08:06:00.944894"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PeopleController#index as HTML
  [1m[35mApiKey Load (0.0ms)[0m  SELECT  "api_keys".* FROM "api_keys" WHERE "api_keys"."token" = ?  ORDER BY "api_keys"."id" ASC LIMIT 1  [["token", "randomstring"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate_resource rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------
AuthenticatableTest: test_creates_api_key_on_create
---------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", "2015-06-04 08:06:00.949777"], ["updated_at", "2015-06-04 08:06:00.949777"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["token", "eff2b31d5d8ff0c748ad9b45ebb4a6af"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:06:00.951394"], ["updated_at", "2015-06-04 08:06:00.951394"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "api_keys"[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------
AuthenticatableTest: test_behaves_like_an_authenticatable_mixin
---------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------
AuthenticatableTest: test_api_key_doesnt_change_on_save
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-06-04 08:06:00.955234"], ["updated_at", "2015-06-04 08:06:00.955234"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "api_keys" ("token", "authenticatable_type", "authenticatable_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["token", "576ed121d1c1b283c9817b3cda7dfcaa"], ["authenticatable_type", "Person"], ["authenticatable_id", 1], ["created_at", "2015-06-04 08:06:00.956454"], ["updated_at", "2015-06-04 08:06:00.956454"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "people" SET "name" = ?, "updated_at" = ? WHERE "people"."id" = ?[0m  [["name", "Peter Griffin"], ["updated_at", "2015-06-04 08:06:00.957686"], ["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------
HasApiKeyTest: test_truth
-------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
